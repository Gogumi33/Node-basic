# Node.js 1ì£¼ì°¨ ìŠ¤í„°ë””

# ë°±ì—”ë“œ ê¸°ì´ˆ
-> Node.jsë¥¼ ë°°ìš°ê¸° ìœ„í•´ì„  ìš°ì„  ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê´€ê³„ì— ëŒ€í•´ ì•Œì•„ì•¼ í•œë‹¤.

## ì„œë²„-í´ë¼ì´ì–¸íŠ¸
* ì£¼ë°© : ì„œë²„(ì–¸ì–´-JAVA, JS, PHP)
* ì‹ë‹¹ ê³ ê° : í´ë¼ì´ì–¸íŠ¸
* ì„œë¹™ ì•Œë°” : http í”„ë¡œí† ì½œ

![](https://velog.velcdn.com/images/king33/post/368bd6a0-8645-474f-8609-9e24a3862bc8/image.png)


## Node.js
ê·¸ë ‡ë‹¤ë©´ Node.jsëž€? ìœ„ ì„œë²„ì–¸ì–´ì¸ JSë¥¼ ë°±ì—”ë“œ ê°œë°œì— ì‚¬ìš©í•˜ê¸° ìœ„í•œ, JSì½”ë“œë¥¼ ë¸Œë¼ìš°ì € 'ë°–'ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” ëŸ°íƒ€ìž„(JS ì‹¤í–‰ê°€ëŠ¥) í™˜ê²½ì´ë‹¤.
ì¦‰, ì‚¬ìš©ìž ì»´í“¨í„°ì—ì„œë„ ëŒì•„ê°€ê³  ì„œë²„ì—ì„œë„ ëŒì•„ê°„ë‹¤!

**_ìµœëŒ€ ìž¥ì  - JSëŠ” ë³´í†µ í”„ë¡ íŠ¸ì—”íŠ¸ ì–¸ì–´ë¡œ ì•Œë ¤ì ¸ìžˆìœ¼ë‚˜, ì´ë¥¼ ë°±ì—”ë“œì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒ._**
 +) ë‹¤ë¥¸ì‚¬ëžŒì´ ë§Œë“¤ì–´ ë†“ì€ ëª¨ë“ˆì„ í„°ë¯¸ë„ì—ì„œ ì„¤ì¹˜ë§Œ í•´ì¤Œìœ¼ë¡œì¨ ë°”ë¡œ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìžˆìŒ.
 +) ì»¤ë®¤ë‹ˆí‹°ë„ ë§¤ìš° í¬ê²Œ ìž˜ í˜•ì„±ë˜ì–´ìžˆìŒ.
 +) ëª½ê³ DB ë˜í•œ JSë¡œë§Œìœ¼ë¡œë„ ì‚¬ìš©ê°€ëŠ¥.
 
--- 

## ì„œë²„
ì›¹ ì„œë²„ë¥¼ ë§Œë“ ë‹¤?
-> ì»´í“¨í„°ë¥¼ ì›¹ ì„œë²„ë¡œ ë™ìž‘í•˜ê²Œ í•˜ëŠ” í”„ë¡œê·¸ëž¨ì„ ë§Œë“ ë‹¤.

## VS Codeì—ì„œ .jsíŒŒì¼ ë°”ë¡œ ì‹¤í–‰í•˜ê¸°
1. ìš°ì„  í„°ë¯¸ë„(powershell)ì„ ì—°ë‹¤.
2. í„°ë¯¸ë„ì—ì„œ cdëª…ë ¹ì–´ - `cd í´ë”ëª…` ì„ í†µí•´ ì‹¤í–‰í•  jsíŒŒì¼ì´ ìžˆëŠ” í´ë”ë¡œ ì´ë™í•´ì¤€ë‹¤
+) cd.. : ë¶€ëª¨ í´ë”ë¡œ ì´ë™

3. `node í´ë”ëª….js` ìž…ë ¥ ì‹œ jsíŒŒì¼ ì‹¤í–‰ë¨.

## npmì´ëž€?
Node Package Managerì˜ ì•½ìžë¡œ, Node.jsì„¤ì¹˜ ì‹œ npmë„ ê°™ì´ ì„¤ì¹˜ëœë‹¤. JS ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¹„ë¡¯í•´ í”„ë ˆìž„ì›Œí¬, í”ŒëŸ¬ê·¸ì¸ ë“± ë‹¤ì–‘í•œ ë‹¤ë¥¸ì‚¬ëžŒë“¤ì´ ë§Œë“¤ì–´ë†“ì€ ê²ƒë“¤ì„ ë‚´ë ¤ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” ë„êµ¬ì´ë‹¤.

ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ì´ˆê¸°í™” í•„ìš”.
```
npm init
```
ì´í›„ ë‚˜ì˜¤ëŠ” ê²ƒë“¤ì€ ì¼ë‹¨ ì—”í„°ë¡œ ë‹¤ ë„˜ì–´ê°„ ë’¤, `Is this OK? (yes)` ì°½ì´ ëœ¨ë©´ yesë§Œ ìž…ë ¥í•´ì¤€ë‹¤.

## npm ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ì‚­ì œ
```
npm uninstall íŒ¨í‚¤ì§€ëª…
```
-> package.json ì—ì„œ ì„¤ì¹˜ëœ ëª¨ë“  íŒ¨í‚¤ì§€ë“¤ì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

---

# JS ê¸°ë³¸ë¬¸ë²•
ëª¨ë¥´ëŠ” ê²ƒë§Œ ê°„ë‹¨ížˆ ì •ë¦¬í•œë‹¤.

* setTimeout() - ì§€ì •í•œ ì‹œê°„ ì´í›„ì— ì‹¤í–‰ë˜ë„ë¡ í•˜ëŠ” Timer í•¨ìˆ˜ì´ë‹¤.
```
setTimeout(() => {
	console.log("haha");
}, 2000); // 2000ì€ 2ì´ˆ.
```

## JS ê°€ìž¥ í° íŠ¹ì§•
**ì“°ë ˆë“œê°€ '1ê°œ'ì´ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ ë¹¨ë¦¬ ëë‚˜ëŠ” ìž‘ì—…ë¶€í„° ìš°ì„ ìˆœìœ„ë¡œ ì²˜ë¦¬í•œë‹¤.**
#### ðŸ’»_ì´ë¥¼ 'ë™ê¸°'ë¼ê³  í•œë‹¤._ 

## ë¹„ë™ê¸°ì²˜ë¦¬
í”„ë¡œê·¸ëž¨ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•  ê¸°ëŠ¥ë“¤ì„ ì›í•˜ëŠ” ìˆœì„œì— ë§žê²Œë” ì¡°ì ˆì„ í•´ì£¼ëŠ” ê²ƒ.
-> React.jsì—ì„œë„ APIë¥¼ ë°›ì•„ì˜¬ ë•Œ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ í–ˆì—ˆìŒ.

---

# Node.js ëª¨ë“ˆ
## ëª¨ë“ˆì´ëž€?
í”„ë¡œê·¸ëž¨ì„ ê°€ìž¥ ìž‘ì€ ë‹¨ìœ„ë¡œ ìª¼ê°œì–´ íŒŒì¼ í˜•íƒœë¡œ ì €ìž¥í•´ë†“ì€ ê²ƒ. ìˆ˜ì •ì´ í•„ìš”í•  ë• ê·¸ ìž‘ì€ ë‹¨ìœ„ë§Œ ê³ ì¹˜ë©´ ë˜ê¸° ë•Œë¬¸ì— íŽ¸ë¦¬í•˜ë‹¤.
(ë³€ìˆ˜ë˜ í•¨ìˆ˜ë˜ ì½”ë“œë¥¼ ì¡°ê°ë‚´ì„œ ì €ìž¥í•  ìˆ˜ ìžˆë‹¤)

* CommonJS ëª¨ë“ˆ ì‹œìŠ¤í…œ - Node.js ê¸°ë³¸ ëª¨ë“ˆ
* ES ëª¨ë“ˆ ì‹œìŠ¤í…œ - ES6ì´í›„ë¡œ í‘œì¤€í™”ëœ ëª¨ë“ˆ

-> ë‘˜ ë‹¤ ê³µì¡´í•˜ë©° ì›í•˜ëŠ” ê²ƒì„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

## ëª¨ë“ˆ ì‚¬ìš©ì˜ˆì‹œ
```
const user = "í™ê¸¸ë™";

module.exports = user;
```
ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ë°–ìœ¼ë¡œ ìˆ˜ì¶œì‹œí‚¤ëŠ” ëŠë‚Œì´ë‹¤.

```
const user = require("./user.js");
```
ê·¸ë¦¬ê³  ìˆ˜ì¶œì‹œí‚¨ ëª¨ë“ˆì€ ì´ë ‡ê²Œ `require(íŒŒì¼ëª…)`ì„ í†µí•´ ë°›ì•„ì˜¤ë©´ ëœë‹¤.

### ê·¸ë ‡ë‹¤ë©´ 2ê°œ ì´ìƒì˜ ê°’ì„ ë‚´ë³´ë‚´ì•¼ í•œë‹¤ë©´?
`module.exprots = {user1, user2};`

---

## path ëª¨ë“ˆ
íŒŒì¼ì˜ ê²½ë¡œì™€ ê´€ë ¨ëœ ëª¨ë“ˆì´ë‹¤.

### ê²½ë¡œ?
* ì ˆëŒ€ê²½ë¡œ - íŒŒì¼/í´ë”ì˜ ìœ„ì¹˜ë¥¼ ë£¨íŠ¸(root)ë¶€í„° ì‹œìž‘í•´ì„œ ì§€ê¸ˆ ìœ„ì¹˜ê¹Œì§€ ì „ì²´ë¥¼ ì „ë¶€ ë‹¤ ë³´ì´ëŠ” ê²ƒ.
* ìƒëŒ€ê²½ë¡œ - ê¸°ì¤€ì´ ë˜ëŠ” íŒŒì¼ë¶€í„° ë‚˜íƒ€ë‚´ëŠ” ë°©ì‹.

## path ëª¨ë“ˆ ì‚¬ìš©ì˜ˆì‹œ
```
// path ëª¨ë“ˆ ì—°ìŠµí•˜ê¸° ( ê²°ê³¼ ë¹„êµ íŒŒì¼ : 03\results\path.js)
const path = require("path"); // path ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°.


// join ì—°ìŠµ -> some\work\ex.txt ë¼ëŠ” ê²½ë¡œìƒì„±.
const fullPath = path.join('some', 'work', 'ex.txt');
console.log(fullPath);

// ê²½ë¡œë§Œ ì¶”ì¶œ - dirname (íŒŒì¼ì´ë¦„ ex.txtë§Œ ì œì™¸)
const dir = path.dirname(fullPath);
console.log(dir);

// íŒŒì¼ì´ë¦„ë§Œ ì¶”ì¶œ - basename (ì•ž some\work ì œì™¸)
const fn1 = path.basename(__filename); // ê¸€ë¡œë²Œ ëª¨ë“ˆ : í˜„ íŒŒì¼ì˜ ì ˆëŒ€ê²½ë¡œë¥¼ ë‚˜íƒ€ëƒ„.
console.log(fn1);
const fn2 = path.basename(__filename, '.js'); // ê·¸ íŒŒì¼ì´ë¦„ë§Œ ì¶”ì¶œí•˜ëŠ”ë°ë„ í™•ìž¥ìž(.js)ë„ ë¹¼ì¤˜
console.log(fn2);
```

---

## File System ëª¨ë“ˆ
íŒŒì¼ì— ê´€ë ¨ëœ ëª¨ë“  ëª¨ë“ˆ

#### readdir() - í•´ë‹¹ ë””ë ‰í† ë¦¬ ì†Œì†ì˜ ëª¨ë“  íŒŒì¼ë“¤ì„ ì½ëŠ”ë‹¤.

## readdir() ì‚¬ìš©ì˜ˆì‹œ
```
const fs = require("fs");

fs.readdir("./", (err, files) => {
    if(err) console.log(err);
    else console.log(files);
});
```

ê²°ê³¼í™”ë©´ - ëª¨ë“  íŒŒì¼ë“¤ì„ ì‹¹ ë‹¤ ë³´ì—¬ì¤€ë‹¤.
![](https://velog.velcdn.com/images/king33/post/6e4c1586-c0b5-40a3-aa5c-8a80ec7ef9cb/image.PNG)

## íŒŒì¼ ìž…ì¶œë ¥
* íŒŒì¼ ì½ì–´ì˜¤ê¸° ì˜ˆì‹œ
```
const fs = require("fs");

fs.readFile("./example.txt", "utf-8", (err, data) => {
    if(err) console.log(err);
    else console.log(data); 
});
// ê²½ë¡œì™€ ì½œë°±í•¨ìˆ˜ 2ê°€ì§€ ë§¤ê°œë³€ìˆ˜ê°€ í•„ìš”í•¨. + ì¸ì½”ë”©ê¹Œì§€ ì ì–´ì£¼ê¸°(utf-8) ì˜µì…˜.
```
* íŒŒì¼ ê¸°ë¡í•˜ê¸° ì˜ˆì‹œ
```
fs.writeFile("./test.txt", data, (err) => {
    if(err) console.log(err);
    else console.log(err);
})
```

---

# â­ì„œë²„(ì¤‘ìš”)
## Node.jsì˜ httpëª¨ë“ˆë¡œ ì„œë²„ ë§Œë“¤ê¸°

### http í”„ë¡œí† ì½œì´ëž€?
HTTP(Hypertext Transfer Protocol)ëŠ” ì¸í„°ë„·ìƒì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ê¸° ìœ„í•œ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ëª¨ë¸ì„ ë”°ë¥´ëŠ” ê·œì•½ì´ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì˜ í”„ë¡œí† ì½œë¡œ TCP/IPìœ„ì—ì„œ ìž‘ë™í•œë‹¤.

_ì°¸ê³  - https://velog.io/@dnjscksdn98/HTTP-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%97%90-%EB%8C%80%ED%95%98%EC%97%AC_

## í¬íŠ¸
í•´ë‹¹ ì„œë²„ ì•ˆì— ìžˆëŠ” ì—¬ëŸ¬ í”„ë¡œê·¸ëž¨ì¤‘ì— íŠ¹ì •í•œ í•˜ë‚˜ì˜ í”„ë¡œê·¸ëž¨ì„ ì°¾ì•„ê°€ëŠ” ë²ˆí˜¸ì´ë‹¤.
ë³´í†µ IPì£¼ì†Œ ë’¤ì— : ë¡œ ë¶™ì–´ì„œ ê°™ì´ ë‚˜ì˜´

## ë³¸ê²© ì„œë²„ë‹¤ë£¨ê¸°
1. ìš°ì„  Node.jsì— ìžˆëŠ” http ëª¨ë“ˆì„ ê°€ì§€ê³  ì™€ì•¼í•œë‹¤.
2. ê·¸ í›„ ëª¨ë“ˆì„ ë‹´ì•„ë‘” httpë³€ìˆ˜ì— createServer() í•¨ìˆ˜ë¥¼ ìž‘ë™ì‹œí‚¨ë‹¤.
```
const http = require("http");
const server = http.createServer((req, res) => {
    console.log("ìš”ì²­ ë°œìƒ");
}); // ìš”ì²­, ì‘ë‹µ
```
3. ì´ì œ ì„œë²„ëŠ” ë‹¤ ë§Œë“¤ì—ˆìœ¼ë¯€ë¡œ listen() í•¨ìˆ˜ë¥¼ í†µí•´ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œì¼œì•¼ í•œë‹¤.
```
server.listen(3000, () => {
    console.log("ì„œë²„ê°€ ì‹¤í–‰ ì¤‘");
})
```

ê·¸ë ‡ë‹¤ë©´ ì´ì œ localhost:3000 ì˜ ì£¼ì†Œë¡œ ì„œë²„ê°€ ì‹¤í–‰ì¤‘ì¸ ê²ƒì´ë‹¤.

**ì´ ë•Œ, ì›¹ì„ ì¼œê³  ìœ„ ì£¼ì†Œë¥¼ ìž…ë ¥í•˜ê²Œ ë˜ë©´ ìš”ì²­ì´ ë°œìƒí•œë‹¤.**

## ì„œë²„ í™”ë©´ì— ì›í•˜ëŠ” í…ìŠ¤íŠ¸ë„ìš°ê¸°
```
const http = require("http");
const server = http.createServer((req, res) => {
    res.setHeader("Content-type", "text/plain");
    res.write("Hello Node"); // resë¼ëŠ” ì‘ë‹µ ê°ì²´ì— writeë¥¼ ì¨ì„œ í™”ë©´ì— ë„ìš°ëŠ” ë°©ë²•.
    res.end();
});
```

---

# ë¼ìš°íŒ…
ë¼ìš°íŒ…ì´ëž€? í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì— ë”°ë¼ ì´ì— ë§žëŠ” í•¨ìˆ˜ë¥¼ ê°ê° ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
ì¦‰, ì‚¬ìš©ìžê°€ ìž…ë ¥í•˜ëŠ” URLì— ë”°ë¼ ì›¹ì—ì„œ ê°ê¸° ë‹¤ë¥¸ ë‚´ìš©ì„ ë³´ì—¬ì¤„ ìˆ˜ ìžˆë‹¤.
(React.jsì˜ idê°’ê³¼ ì¿¼ë¦¬ë¥¼ ì´ìš©í•œ í™”ë©´ì „í™˜ê³¼ ê°™ì€ ê°œë…)

## ë¼ìš°íŒ… ë‹¤ë¤„ë³´ê¸°
```
const http = require("http");
const server = http.createServer((req, res) => {
    // req.url : ìš”ì²­ê²½ë¡œ
    // req.method : ìš”ì²­ë°©ì‹

    const { url, method } = req;

    res.setHeader("Content-type", "text/plain");

    if(method==="GET" && url==="/home"){
        res.write("HOME"); // res.end("Home"); ê³¼ ê°™ì€ì˜ë¯¸.
        res.end();
    } else if(method==="GET" && url==="/about"){
        res.end("ABOUT");
    } else {
        res.end("NOT FOUND!!!");
    }
});

server.listen(3000, () => {
    console.log("ì„œë²„ê°€ ì‹¤í–‰ ì¤‘");
})
```

---

# ìµìŠ¤í”„ë ˆìŠ¤ í”„ë ˆìž„ì›Œí¬
ìœ„ ë¼ìš°íŒ…ì„ í›¨ì”¬ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìžˆê²Œ ë„ì™€ì£¼ëŠ” í”„ë ˆìž„ì›Œí¬ì´ë‹¤.

+) ë¯¸ë“¤ì›¨ì–´ / í…œí”Œë¦¿ ì—”ì§„ ë“± ë‹¤ì–‘í•œ ìž¥ì 

## ì„¤ì¹˜ - VS Code
1. `npm init`ìœ¼ë¡œ ì ¤ ë¨¼ì € ì´ˆê¸°í™”ìž‘ì—…
2. `npm i express` ë¡œ ìµìŠ¤í”„ë ˆìŠ¤ ì„¤ì¹˜
 -> package.json ì— "express" ë²„ì ¼ìœ¼ë¡œ ì„¤ì¹˜í™•ì¸ ê°€ëŠ¥.
3. nodemonì„¤ì¹˜ : ê³„ì† ê°œë°œí•  ë•Œ ë§ˆë‹¤ ì„œë²„ ë„ê³  í•´ì•¼í•˜ëŠ” ë¶ˆíŽ¸í•¨ ê°œì„ 
`npm i nodemon --save-dev -g` (ì•± ì½”ë“œìžì²´ì—” ì˜í–¥X)

## ìµìŠ¤í”„ë ˆìŠ¤ ì‚¬ìš©ì˜ˆì‹œ
```
const express = require("express");
const app = express(); // expressì—ì„œëŠ” createServer() í•´ì¤„ í•„ìš” X. ì´ë ‡ê²Œ ì‹¤í–‰ë§Œ í•´ì£¼ë©´ ë¨.

app.get("/", (req, res) => { // ë§¤ìš° ê°„ë‹¨í•¨ - ìš”ì²­ë°©ì‹ : í•¨ìˆ˜ì´ë¦„
    res.send('Hello, Node!');
})

app.listen(3000, () => {
    console.log("ì„œë²„ê°€ ì‹¤í–‰ì¤‘ìž…ë‹ˆë‹¤.");
})
```